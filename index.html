<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pok√©-Farewell: The Final Journey</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root {
            --pixel-bg: #050508;
            --pixel-accent: #ffcb05; 
            --pixel-blue: #3b4cca;
            --font-pixel: 'VT323', monospace;
            --font-content: "SF Mono", "Monaco", "PingFang SC", "Microsoft YaHei", monospace;
        }

        body {
            margin: 0; padding: 0;
            background: var(--pixel-bg);
            background: radial-gradient(circle at center, #111827 0%, #050508 100%) no-repeat fixed;
            color: white; min-height: 100vh;
            font-family: var(--font-pixel) !important;
            overflow-x: hidden;
        }

        /* --- Âä®ÊÄÅÊòüÁ©∫ --- */
        .stars-container { position: fixed; inset: 0; z-index: -1; pointer-events: none; overflow: hidden; }
        .star { position: absolute; background: white; border-radius: 50%; box-shadow: 0 0 5px rgba(255,255,255,0.5); animation: twinkle var(--t-duration) infinite ease-in-out, floatMove var(--f-duration) infinite ease-in-out; }
        @keyframes twinkle { 0%, 100% { opacity: 0.2; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } }
        @keyframes floatMove {
            0% { transform: translate(0, 0); }
            33% { transform: translate(var(--mx), var(--my)); }
            66% { transform: translate(calc(var(--mx) * -0.7), calc(var(--my) * 1.3)); }
            100% { transform: translate(0, 0); }
        }

        /* --- ÂØºËà™‰∏éÊ†áÈ¢ò --- */
        .nav { position: sticky; top: 0; width: 100%; padding: 12px 0; display: flex; justify-content: center; gap: 15px; z-index: 100; background: rgba(0, 0, 0, 0.9); border-bottom: 3px solid #333; }
        .nav-btn { background: #000; border: 2px solid white; color: white; padding: 8px 24px; font-family: var(--font-pixel) !important; font-size: 1.8rem; text-transform: uppercase; cursor: pointer; transition: 0.2s; }
        .nav-btn.active { background: var(--pixel-blue); color: var(--pixel-accent); box-shadow: 4px 4px 0 #000; }
        h2 { font-family: var(--font-pixel) !important; text-transform: uppercase; letter-spacing: 3px; margin: 10px 0; }

        /* --- Á≤æÁÅµÁêÉÂå∫Âüü‰øÆÂ§ç --- */
        .ball-stage { display: flex; flex-direction: column; align-items: center; margin: 30px 0; }
        .ball-wrapper { position: relative; width: 180px; height: 180px; cursor: pointer; }
        .ball-img { 
            width: 100%; height: 100%; 
            background: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png') no-repeat center/contain; 
            image-rendering: pixelated; 
        }
        .shake { animation: shakeBall 0.6s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shakeBall { 0%, 100% { transform: translateX(0); } 15%, 45%, 75% { transform: translateX(-10px) rotate(-10deg); } 30%, 60%, 90% { transform: translateX(10px) rotate(10deg); } }
        #success-hint { color: var(--pixel-accent); font-family: var(--font-pixel); font-size: 2.2rem; margin-top: 15px; opacity: 0; transition: opacity 0.4s; font-weight: bold; }

        /* --- ËæìÂÖ•Èù¢Êùø --- */
        .panel { background: #000; border: 4px solid #fff; padding: 25px; width: 400px; margin: 0 auto; box-shadow: 10px 10px 0 rgba(0,0,0,0.5); }
        input, textarea { width: 100%; background: #222; border: 2px solid #555; color: #fff; padding: 12px; margin-bottom: 15px; box-sizing: border-box; outline: none; }
        input { font-family: var(--font-pixel); font-size: 1.4rem; text-transform: uppercase; }
        textarea { font-family: var(--font-content); font-size: 1rem; }
        .pixel-btn { width: 100%; padding: 15px; background: var(--pixel-accent); border: none; cursor: pointer; font-family: var(--font-pixel) !important; font-size: 2.2rem; font-weight: bold; text-transform: uppercase; }

        /* --- Âç°ÁâáÂ∏ÉÂ±Ä‰∏éÊªöÂä®Êù° --- */
        .masonry-grid { column-count: 4; column-gap: 20px; padding: 20px; max-width: 1450px; margin: 0 auto; }
        @media (max-width: 1100px) { .masonry-grid { column-count: 2; } }
        @media (max-width: 600px) { .masonry-grid { column-count: 1; } }

        .tcg-card { background: linear-gradient(135deg, #fce38a, #f9ca24); border: 5px solid #444; border-radius: 4px; padding: 12px; color: #333; box-shadow: 6px 6px 0 rgba(0,0,0,0.5); break-inside: avoid; margin-bottom: 25px; width: 100%; box-sizing: border-box; position: relative; }
        .card-header { display: flex; justify-content: space-between; font-family: var(--font-pixel) !important; font-size: 1.8rem; border-bottom: 2.5px solid #333; padding-bottom: 5px; text-transform: uppercase; align-items: center; }
        .card-img-frame { background: #fff; border: 2.5px solid #333; margin: 8px 0; height: 160px; display: flex; align-items: center; justify-content: center; }
        .card-img-frame img { height: 140px; image-rendering: pixelated; }
        
        .card-msg-box { background: rgba(255,255,255,0.9); border: 2px solid #333; padding: 12px; font-family: var(--font-content) !important; font-size: 1.05rem; line-height: 1.5; color: #111; text-align: left; max-height: 200px; overflow-y: auto; word-wrap: break-word; }
        .card-msg-box::-webkit-scrollbar { width: 8px; }
        .card-msg-box::-webkit-scrollbar-track { background: #eee; }
        .card-msg-box::-webkit-scrollbar-thumb { background: #333; border: 1px solid #eee; }

        .card-footer { text-align: right; margin-top: 10px; font-family: var(--font-pixel) !important; font-size: 1.2rem; border-top: 1px solid #333; padding-top: 6px; text-transform: uppercase; }
        .del-btn { background: #ff4757; color: white; border: 2px solid #333; font-family: var(--font-pixel) !important; cursor: pointer; font-size: 1.1rem; padding: 0 8px; margin-left: 10px; box-shadow: 2px 2px 0 #000; }

        .hidden { display: none; }
        #overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 1000; flex-direction: column; }
    </style>
</head>
<body>

<div class="stars-container" id="starField"></div>

<nav class="nav">
    <button class="nav-btn active" id="btn-write" onclick="setMode('write')">Leave Wish</button>
    <button class="nav-btn" id="btn-draw" onclick="setMode('draw')">Draw Card</button>
    <button class="nav-btn" id="btn-all" onclick="setMode('all')">View Wall</button>
</nav>

<main style="padding: 20px; display: flex; flex-direction: column; align-items: center;">
    <section id="section-write">
        <div class="ball-stage">
            <h2 style="color:var(--pixel-accent); font-size: 2.5rem;">CATCH YOUR DESTINY</h2>
            <div class="ball-wrapper" onclick="handleSend()">
                <div class="ball-img" id="ball-main"></div>
            </div>
            <div id="success-hint">GOTCHA! RECORDED!</div>
        </div>
        <div class="panel">
            <input type="text" id="nameIn" placeholder="TRAINER NAME...">
            <textarea id="msgIn" rows="5" placeholder="WISH FOR OUR FRIEND..."></textarea>
            <button class="pixel-btn" onclick="handleSend()">[ CLICK TO SEAL ]</button>
        </div>
    </section>

    <section id="section-draw" class="hidden" style="text-align: center;">
        <h2 style="color:var(--pixel-accent); font-size: 2.5rem;">COLLECTOR'S BOX</h2>
        <div class="ball-stage">
            <div class="ball-wrapper" onclick="drawOne()">
                <div class="ball-img" id="ball-draw"></div>
            </div>
            <p style="font-size: 2rem; color:#fff; text-transform: uppercase;">Tap Ball To Summon</p>
        </div>
    </section>

    <section id="section-all" class="hidden">
        <h2 style="text-align: center; color:var(--pixel-accent); font-size: 3rem;">THE POKE-WALL</h2>
        <div class="masonry-grid" id="wall-grid"></div>
    </section>
</main>

<div id="overlay">
    <div id="draw-target" style="width: 380px;"></div>
    <button class="nav-btn" style="margin-top: 20px;" onclick="closeOverlay()">Recall</button>
</div>

<script>
    // --- Á°¨ÁºñÁ†Å 10 Êù°ÁïôË®Ä ---
    const prefilledData = [{"id":1767821930872,"name":"FELICIA","msg":"Congrats on the move! It‚Äôs been great working with you!  I‚Äôm certain your creativity and thoughtfulness will be a huge asset in the blue sky world :). Wishing you the best with the new adventure, can‚Äôt wait to see the final results!","poke":{"n":"Arcanine","id":59}},{"id":1767821971348,"name":"VANESSA","msg":"I couldn‚Äôt ask for a better design partner and lead. You‚Äôve made such an impact on the CoSTL experience and I learned so much from you along the way. I have no doubt you‚Äôll bring the same level of excellence to anything you work on.","poke":{"n":"Mew","id":151}},{"id":1767821984649,"name":"NICK","msg":"I remember first meeting in North Carolina when we went to Toshiba headquarters. You have always been an amazing person to converse with either to bounce ideas off of or just have a friendly chat. You really distinguished yourself in your overall design ability but definitely in your ability to audit the minute details during design reviews :). I am happy we became fast friends during our time working together. I can only wish you the best as the newest traitor to the team!","poke":{"n":"Lucario","id":448}},{"id":1767822002953,"name":"COLLEEN","msg":"Thanks for being an amazing design partner. Your new project is so lucky to have your creative talent and wealth of knowledge! Excited to see what you come up with next and hope we get to work together in the future!","poke":{"n":"Snorlax","id":143}},{"id":1767822552100,"name":"SHUJIE","msg":"Ëã±ÊñáÊÑüËßâÊ≤°Ê≥ïÂæàÂ•ΩÁöÑË°®ËææÊàëÁöÑÊÑüË∞¢ÊâÄ‰ª•ÊàëÂ∞±Áõ¥Êé•Áî®‰∏≠ÊñáÂÜô‰∫ÜÔºåÊàëÊØï‰∏öÂºÄÂßãÂ∑•‰ΩúÂêéÊúÄÂπ∏ËøêÊúÄÂºÄÂøÉÁöÑ‰∫ãÊÉÖÂ∞±ÊòØËÉΩÂíå‰Ω†‰∏ÄËµ∑ÂÖ±‰∫ã‰∏âÂπ¥ÔºåËÉΩÂú®ËÅå‰∏öÂàùÊúüÈÅáÂà∞Ëøô‰πàÂ•ΩÁöÑÂêå‰∫ã/designer/mentorÔºåÁÆÄÁõ¥ÊòØ‰∏ñÁïå‰∏äÊúÄÊúÄÂπ∏ËøêÁöÑ‰∫ãÊÉÖ‰∫Ü\nÊàëÂØπÂ±±ÂßÜÁöÑ‰∏çËàçÂÖ∂ÂÆûÂÆåÂÖ®ÊòØÂõ†‰∏∫ÊÉ≥Âíå‰Ω†‰∏ÄËµ∑Â∑•‰ΩúÔºå‰Ω†ÂØπÊàëÁöÑÂ∏ÆÂä©ÂÆûÂú®Â§™Â§öÂ§™Â§ö‰∫ÜÔºå‰∏ç‰ªÖ‰ªéËÆæËÆ°‰∏äÔºàÂ≠¶‰ºöÊ≥®ÈáçËÆæËÆ°ÁªÜËäÇÔºåÊõ¥ÂÖ®Èù¢ÁöÑÂéªËÄÉËôëflowÔºåscenairosÔºâÔºåÂ∑•‰Ωú‰∏äÔºàÂ¶Ç‰ΩïÂíåÂêå‰∫ãÈ¢ÜÂØºÊ≤üÈÄöÁõ∏Â§ÑÔºåÊÄé‰πàÂéªpushbackÊàñËÄÖÊé®ËøõÈ°πÁõÆÔºâÔºåËøòÊúâËÅåÂú∫‰∏äÁöÑÂæàÂ§ö‰∫ãÊÉÖ‰Ω†‰πüÈÉΩ‰∫ãÊó†Â∑®ÁªÜÁöÑÊïôÊàëÔºåÊàëÊÄªÊòØÊÑüÂèπ‰∏∫‰ªÄ‰πà‰ºöËøô‰πàÂπ∏ËøêËÉΩÈÅáÂà∞‰Ω†ÔºåÈÅáÂà∞‰∏Ä‰∏™ÂÆåÁæéÁöÑ‰∏äÁ∫ßÔºåÁúüÁöÑÂ§™ÈöæÂæó‰∫ÜÔºå‰Ω†Â∑≤ÁªèÊòØÊàëÁöÑËÅåÂú∫role model\nÊâÄ‰ª•ÂàöÁü•ÈÅì‰Ω†Ë¶ÅÂéªÊñ∞È°πÁõÆÁöÑÊó∂ÂÄôÁúüÁöÑÁâπÂà´ÁâπÂà´ÈöæËøáÔºå‰ΩÜÂêåÊó∂Âèà‰∏∫‰Ω†ÂºÄÂøÉÔºåÂèØ‰ª•ÂéªÂÅö‰∏Ä‰∫õÊúâÊÑèÊÄùÁöÑÈ°πÁõÆ‰∫ÜÔΩûËÄå‰∏îËØ¥‰∏çÂÆöÊàë‰ª¨ËøòÂèØ‰ª•ÂÜçÂÅöÂêå‰∏Ä‰∏™È°πÁõÆÔºåËøòËÉΩÂÜçÁªßÁª≠ÂΩì‰Ω†ÁöÑÂ∞èÁªÑÂëò\nÊÄª‰πãÁúüÁöÑÁúüÁöÑÂæàË∞¢Ë∞¢‰Ω†ÔºåËÆ©ÊàëÁúãÂà∞‰∫Ü‰ªÄ‰πàÊòØ‰∏Ä‰∏™Â•ΩÁöÑdesignerÔºåmentorÔºåÊàë‰πü‰ºö‰∏ÄÁõ¥Á•ùÁ¶è‰Ω†ÂèØ‰ª•ÂÅöËá™Â∑±ÂñúÊ¨¢ÁöÑ‰∏úË•øÔºåÂèØ‰ª•‰∏çÁî®ÈÇ£‰πàÁ¥Ø‰∏çÁî®ÊâÄÊúâ‰∏úË•øÈÉΩËá™Â∑±ÊâõÁùÄ ^_^\nËôΩÁÑ∂‰∏çÊòØÂ∞èÁªÑÂëò‰∫Ü‰ΩÜÂèØ‰ª•‰∏ÄÁõ¥ÊòØÂ•ΩÊúãÂèãÔºå‰ª•ÂêéË¶ÅÁªèÂ∏∏‰∏ÄËµ∑Áé©ÔºÅÔºÅÊàëÂéª‰∏âÁï™Êâæ‰Ω†Á∫¶È•≠ÂìüÔºåÊàëËøò‰ºöÂ§öÂ§öÂéªsbÁöÑofficeËßÅ‰Ω†ÁöÑÔΩûÁé∞Âú®‰∏çÂú®‰∏Ä‰∏™ÁªÑ‰∫Ü‰Ω†ÊòØ‰∏çÊòØÂèØ‰ª•ÂΩìÊàëÁöÑmentor‰∫ÜÂìàÂìàÂìàÂìàÂìàÂìàÂìà ÊÄª‰πãÂ∏åÊúõ‰Ω†‰∏Ä‰∫õÈÉΩÂ•ΩÔºöÔºâ","poke":{"n":"Squirtle","id":7}},{"id":1767822582229,"name":"ERSHAD","msg":"Big thank you as you move to your next team. Working with you has been awesome, and I‚Äôve really enjoyed our time collaborating together.\nYour design skills and the way you lead and deliver always stood out. You brought so much clarity and confidence to the work, and it made a huge difference for the whole team.\nOn a personal note, I‚Äôm really glad we became good friends along the way. I‚Äôll definitely miss working closely with you, but I‚Äôm excited to see you do great things in your next role.\nWishing you all the best ‚Äî and let‚Äôs definitely stay in touch.","poke":{"n":"Dragonite","id":149}},{"id":1767822619326,"name":"EVAN","msg":"You‚Äôre not far from us. After all these years shaping the checkout experience, this totally feels like a milestone. Congrats! \nI always love seeing your designs, so thoughtful and polished every time. And you‚Äôre always such a fun, humble teammate to work with.","poke":{"n":"Blastoise","id":9}},{"id":1767822666939,"name":"PRUDHVI","msg":"Thanks for the great collaboration! Really enjoyed working with you and appreciated your UX insights and support. Wishing you the best on your next project!","poke":{"n":"Charmander","id":4}},{"id":1767822680708,"name":"RAIGON","msg":"I will miss you!  you have been fabulous to work with.  So thoughtful and easy to bounce ideas with.  Enjoy your next project!!  I like hearing your stories of torturing you husbund with food choices!  and I will never be able to say your name correctly","poke":{"n":"Rayquaza","id":384}},{"id":1767857871360,"name":"MARCELLE","msg":"I honestly can‚Äôt thank you enough for everything you have done for this team and for me. Your ability to remember the tiniest details from conversations years ago always blew me away. Your eye for design and your fun nature brought so much value to this team, and they‚Äôll be missed greatly. I‚Äôm incredibly grateful for the time we had to work together. I will miss you, but I will still bug you in the San Bruno office. Wishing you the very best in your new project, Shawn üôÇ","poke":{"n":"Bulbasaur","id":1}}];

    const pokes = [
        {n: 'Pikachu', id: 25}, {n: 'Charizard', id: 6}, {n: 'Greninja', id: 658},
        {n: 'Lucario', id: 448}, {n: 'Mewtwo', id: 150}, {n: 'Eevee', id: 133},
        {n: 'Sylveon', id: 700}, {n: 'Gengar', id: 94}, {n: 'Rayquaza', id: 384},
        {n: 'Dragonite', id: 149}, {n: 'Snorlax', id: 143}, {n: 'Mew', id: 151},
        {n: 'Squirtle', id: 7}, {n: 'Bulbasaur', id: 1}, {n: 'Charmander', id: 4},
        {n: 'Gyarados', id: 130}, {n: 'Lapras', id: 131}, {n: 'Arcanine', id: 59},
        {n: 'Alakazam', id: 65}, {n: 'Blastoise', id: 9}
    ];

    function setMode(m) {
        document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('section-'+m).classList.remove('hidden');
        document.getElementById('btn-'+m).classList.add('active');
        if(m === 'all') renderWall();
    }

    function handleSend() {
        const n = document.getElementById('nameIn').value.trim();
        const m = document.getElementById('msgIn').value.trim();
        if(!n || !m) return;
        
        // ÈÅøÈáçÂàÜÈÖçÈÄªËæë
        let hash = 0;
        const cleanName = n.toUpperCase();
        for (let i = 0; i < cleanName.length; i++) { hash = ((hash << 5) - hash) + cleanName.charCodeAt(i); hash |= 0; }
        let index = Math.abs(hash) % pokes.length;
        const localData = JSON.parse(localStorage.getItem('pokeFinalFloating') || '[]');
        const usedIds = [...prefilledData, ...localData].map(d => d.poke.id);
        let attempts = 0;
        while(usedIds.includes(pokes[index].id) && attempts < pokes.length) { index = (index + 1) % pokes.length; attempts++; }

        const assignedPoke = pokes[index];
        const ball = document.getElementById('ball-main');
        const hint = document.getElementById('success-hint');
        
        const data = JSON.parse(localStorage.getItem('pokeFinalFloating') || '[]');
        data.push({ id: Date.now(), name: n.toUpperCase(), msg: m, poke: assignedPoke });
        localStorage.setItem('pokeFinalFloating', JSON.stringify(data));
        
        // ÈúáÂä®Âä®Áîª
        ball.classList.add('shake');
        setTimeout(() => {
            ball.classList.remove('shake');
            hint.style.opacity = '1';
            document.getElementById('nameIn').value = '';
            document.getElementById('msgIn').value = '';
            setTimeout(() => { hint.style.opacity = '0'; }, 2000);
        }, 600);
    }

    function deleteCard(id) {
        if(!confirm("DELETE THIS CARD?")) return;
        let data = JSON.parse(localStorage.getItem('pokeFinalFloating') || '[]');
        data = data.filter(item => item.id !== id);
        localStorage.setItem('pokeFinalFloating', JSON.stringify(data));
        renderWall();
    }

    function createCard(c, showDelete) {
        return `
            <div class="tcg-card">
                <div class="card-header">
                    <span>${c.poke.n}</span>
                    <div style="display:flex; align-items:center;">
                        <span style="color:#ff4757">HP 999</span>
                        ${showDelete ? `<button class="del-btn" onclick="deleteCard(${c.id})">X</button>` : ''}
                    </div>
                </div>
                <div class="card-img-frame">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${c.poke.id}.png">
                </div>
                <div class="card-msg-box">${c.msg.replace(/\n/g, '<br>')}</div>
                <div class="card-footer">TRNR: ${c.name}</div>
            </div>
        `;
    }

    function renderWall() {
        const localData = JSON.parse(localStorage.getItem('pokeFinalFloating') || '[]');
        const allData = [...prefilledData, ...localData];
        document.getElementById('wall-grid').innerHTML = allData.map(c => createCard(c, true)).join('');
    }

    function drawOne() {
        const localData = JSON.parse(localStorage.getItem('pokeFinalFloating') || '[]');
        const allData = [...prefilledData, ...localData];
        if(allData.length === 0) return;
        const b = document.getElementById('ball-draw');
        b.classList.add('shake');
        setTimeout(() => {
            b.classList.remove('shake');
            const c = allData[Math.floor(Math.random()*allData.length)];
            document.getElementById('draw-target').innerHTML = createCard(c, false);
            document.getElementById('overlay').style.display = 'flex';
        }, 600);
    }
    function closeOverlay() { document.getElementById('overlay').style.display = 'none'; }

    // ÊòüÁ©∫ËÉåÊôØÈÄªËæë
    const sf = document.getElementById('starField');
    for(let i=0; i<150; i++){
        const s = document.createElement('div');
        s.className = 'star';
        const size = Math.random() * 3 + 1;
        s.style.width = size + 'px'; s.style.height = size + 'px';
        s.style.left = Math.random() * 100 + '%'; s.style.top = Math.random() * 100 + '%';
        s.style.setProperty('--mx', (Math.random()-0.5)*150+'px');
        s.style.setProperty('--my', (Math.random()-0.5)*150+'px');
        s.style.setProperty('--f-duration', (10 + Math.random() * 20) + 's');
        s.style.setProperty('--t-duration', (1 + Math.random() * 3) + 's');
        sf.appendChild(s);
    }
</script>
</body>
</html>
